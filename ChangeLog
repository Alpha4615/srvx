# do not edit -- automatically generated by arch changelog
# arch-tag: automatic-ChangeLog--srvx@srvx.net--2005-srvx/srvx--devo--1.3
#

2005-12-23 03:11:09 GMT	Michael Poole <mdpoole@troilus.org>	patch-35

    Summary:
      Default to not trimming users on vacation.
    Revision:
      srvx--devo--1.3--patch-35

    chanserv.c (cmd_trim_users): New argument to indicate whether users on
        vacation should be included.
      (cmd_trim): Parse an extra option to control that argument.
    
    chanserv.help: Document this change.

    modified files:
     ChangeLog src/chanserv.c src/chanserv.help


2005-12-23 03:06:55 GMT	Michael Poole <mdpoole@troilus.org>	patch-34

    Summary:
      Update config.guess and config.sub
    Revision:
      srvx--devo--1.3--patch-34

    config.guess: Update to support newer targets.
    config.sub: Likewise.

    modified files:
     ChangeLog config.guess config.sub


2005-11-17 20:43:26 GMT	Michael Poole <mdpoole@troilus.org>	patch-33

    Summary:
      Fixes for LP64 models; announce IPv6 support.
    Revision:
      srvx--devo--1.3--patch-33

    src/alloc-slab.c (SMALL_CUTOFF): Adjust to a multiple of 8.
    
    src/alloc-srvx.c (srvx_malloc): Fix format string for LP64.
    
    src/md5.h (UINT4): Fix typedef for LP64.
    
    src/opserv.c (cmd_warn): Fix whitespace.
    
    src/proto-p10.c (irc_server): Announce IPv6 support.

    modified files:
     ChangeLog src/alloc-slab.c src/alloc-srvx.c src/md5.h
     src/opserv.c src/proto-p10.c


2005-11-01 00:37:44 GMT	Michael Poole <mdpoole@troilus.org>	patch-32

    Summary:
      Avoid leaking information through ChanServ's ban matching.
    Revision:
      srvx--devo--1.3--patch-32

    src/common.h (user_matches_glob): Convert last argument to be flags.
    
    src/tools.c (user_matches_glob): Reorder tests to properly implement
        the MATCH_VISIBLE flag.
    
    src/chanserv.c: Update callers of user_matches_glob() to set
        the MATCH_VISIBLE flag (in addition to MATCH_USENICK).
    
    src/opserv.c: Update callers of user_matches_glob() to pass the
        MATCH_USENICK flag.

    modified files:
     ChangeLog src/chanserv.c src/common.h src/opserv.c src/tools.c


2005-11-01 00:23:14 GMT	Michael Poole <mdpoole@troilus.org>	patch-31

    Summary:
      Handle default oplevels.
    Revision:
      srvx--devo--1.3--patch-31

    src/chanserv.c (cmd_mode): Calculate base oplevel as 1 plus one point
        for each access level below owner.
      (chan_opt_modes): Add new argument for mod_chanmode_parse().
      (chanserv_conf_read): Likewise.
      (chanserv_channel_read): Likewise.
    
    src/hash.c (AddChannel): Likewise.
      (AddChannelUser): Set oplevel by default.
    
    src/hash.h (MAXOPLEVEL): New define value.
      (modeNode): Shrink modes and oplevel fields.
    
    src/opserv.c (cmd_chaninfo): Fix indentation; show oplevel after
        nickname rather than before it.
    
    src/proto.h (mod_chanmode_parse): Declare new parameter.
    
    src/proto-bahamut.c (mod_chanmode_parse): Add new parameter (and
        ignore it).
    
    src/proto-common.c (mod_chanmode): Find the default oplevels for
        parsing the mode change.
    
    src/proto-p10.c (create_desc): Remove oplevel field.
      (join_helper): Do not try to set oplevel for new modeNode.
      (parse_foreach): Do not bother parsing oplevels in JOIN, since they
        are no longer used.
      (mod_chanmode_parse): Add new parameter and use it to determine the
        oplevel to set when a valid oplevel one is not specified.

    modified files:
     ChangeLog src/chanserv.c src/hash.c src/hash.h src/opserv.c
     src/proto-bahamut.c src/proto-common.c src/proto-p10.c
     src/proto.h


2005-10-13 02:20:55 GMT	Michael Poole <mdpoole@troilus.org>	patch-30

    Summary:
      Default ?block (etc) to G-line by IP; fix a buffer issue.
    Revision:
      srvx--devo--1.3--patch-30

    src/opserv.c (opserv_block): Rewrite to block by IP rather than
        hostname.
      (opserv_new_user_check): Avoid overrunning the target buffer.

    modified files:
     ChangeLog src/opserv.c


2005-10-08 14:56:31 GMT	Michael Poole <mdpoole@troilus.org>	patch-29

    Summary:
      Initial oplevel support.
    Revision:
      srvx--devo--1.3--patch-29

    src/proto-p10.c: Fix a few bugs and compile errors in oplevel code.
    
    Patches applied:
    
     * sp@gamesurge.net--2005/srvx--sp--1.3--patch-1
       Oplevel support
    
     * sp@gamesurge.net--2005/srvx--sp--1.3--patch-2
       Oplevel support (part 2)

    modified files:
     ChangeLog src/hash.c src/hash.h src/opserv.c
     src/proto-common.c src/proto-p10.c src/proto.h

    new patches:
     sp@gamesurge.net--2005/srvx--sp--1.3--patch-1
     sp@gamesurge.net--2005/srvx--sp--1.3--patch-2


2005-10-08 14:33:12 GMT	Michael Poole <mdpoole@troilus.org>	patch-28

    Summary:
      Add IPv6 support.
    Revision:
      srvx--devo--1.3--patch-28

    configure.in: Check for struct sockaddr.sa_len and struct addrinfo.
        Also check for freeaddrinfo, getaddrinfo and getnameinfo.
    
    src/common.h: Define irc_in_addr and macros to operate on it.  Declare
        irc_ntop(), irc_ntop_mask(), irc_pton(), irc_check_mask() and
        irc_ntoa().  Remove declaration for parse_ipmask() and undefine
        INADDR_NONE, INADDR_LOOPBACK and MATCH_IPMASK().
    
    src/compat.h (struct addrinfo): Define if it and some flags if not
        defined by the system.
      (getaddrinfo): Declare if necessary.
      (getnameinfo): Likewise.
      (freeaddrinfo): Likewise.
    
    src/compat.c (memcpy): Do not try to fall back onto bcopy.
      (getaddrinfo): Define if it is not defined by the system.
      (freeaddrinfo): Likewise.
    
    src/gline.c (gline_alternate_target): Gut in preparation of a
        necessary rewrite.  Blah.
    
    src/hash.h (struct userNode): Change type of ip field.
    
    src/ioset.c (ioset_connect): Update to support non-IPv4 protocols.
    
    src/main.c (uplink_insert): Update to support non-IPv4 protocols.
    
    src/mod-snoop.c (snoop_new_user): Use irc_ntoa() instead of inet_ntoa().
    
    src/mod-sockcheck.c (sockcheck_cache_info): Update address field type
        and length of hostname field.
      (sockcheck_conf): Update type of local_addr.
      (sockcheck_issue_gline): Update to use irc_ntop().
      (expand_var): Get client IPv4 address from its new place.
      (sockcheck_decide): Do not print the IP twice.
      (sockcheck_begin_test): Remove unnecessary typecast.
      (sockcheck_start_client): Do not print the IP twice.
      (sockcheck_queue_address): Use irc_in_addr_t and irc_ntoa() to form
        the target hostname.
      (cmd_hostscan): Update manipulation functions to use new macros and
        functions for irc_in_addr_t.
      (cmd_clearhost): Likewise.
      (sockcheck_new_user): Likewise.
      (sockcheck_read_conf): Use getaddrinfo() instead of IPv4-only
        functions.
    
    src/nickserv.c (cmd_register): Use newer validity checks for IP.
    
    src/opserv.c (IDENT_DATA): Use irc_ntoa() instead of inet_ntoa().
      (struct opservDiscrim): Update ip_mask and ip_mask_bits type.
      (cmd_whois): Use irc_ntoa() instead of inet_ntoa().
      (opserv_new_user_check): Use irc_ntop() instead of inet_ntoa() and
        update to newer validity check macros.
      (opserv_user_cleanup): Use irc_ntop() instead of inet_ntoa().
      (cmd_addtrust): Update to irc_in_addr_t and its functions.
      (foreach_matching_user): Use irc_pton() instead of the mess that
        existed before.
      (opserv_discrim_create): Use irc_pton() instead of parse_ipmask().
      (discrim_match): Use irc_check_mask() instead of MATCH_IPMASK(), and
        remove ip_mask_str check.
      (opserv_discrim_search): Decide whether an IP match is fully
        qualified based on ip_mask_bits instead of ip_mask_str.
      (trace_domains_func): Add IPv6 support.
      (opserv_staff_alert): Update to new IP validity check macro.
    
    src/proto.h (struct uplinkNode): Fix type of bind_addr field.
    
    src/proto-bahamut.c (AddUser): Use irc_in_addr_t.
      (AddService): Default to an all-zero IP instead of loopback.
      (AddClone): Likewise.
      (irc_user): Use new layout for IPv4 in irc_in_addr_t.
      (cmd_nick): Likewise.
    
    src/proto-common.c (create_socket_client): Remove unnecessary
        typecast.
      (generate_hostmask): Update to use irc_in_addr_t and support
        functions instead of IPv4-specific things.
    
    src/proto-p10.c (irc_p10_pton): New function.
      (irc_p10_ntop): New function.
      (irc_user): Use irc_p10_ntop().
      (AddClone): Use irc_p10_pton().
    
    src/tools.c (ctype): New array holding values of characters as hex.
      (irc_ntop): New function.
      (irc_ntop_mask): New function.
      (irc_pton_ip4): New helper function.
      (irc_pton): New function.
      (irc_ntoa): New function.
      (irc_check_mask): New function.
      (user_matches_glob): Use irc_ntoa() instead of inet_ntoa().
      (parse_ipmask): Delete this function.

    modified files:
     ChangeLog configure.in src/common.h src/compat.c src/compat.h
     src/gline.c src/hash.h src/ioset.c src/main.c src/mod-snoop.c
     src/mod-sockcheck.c src/nickserv.c src/opserv.c
     src/proto-bahamut.c src/proto-common.c src/proto-p10.c
     src/proto.h src/tools.c


2005-10-07 02:51:12 GMT	Michael Poole <mdpoole@troilus.org>	patch-27

    Summary:
      Fix compiler warnings on AMD64 Linux.
    Revision:
      srvx--devo--1.3--patch-27

    src/gline.c (gline_alternate_target): Typecast format field precision
        argument.
    
    src/helpfile.c (helpfile_eval_identifier): Likewise.
      (helpfile_eval_atomicexpr): Likewise.
      (helpfile_eval_expr): Likewise.
      (helpfile_eval_condition): Likewise.
    
    src/log.c (log_audit): Change typecast used to make types compatible.
    
    src/main.c (set_item_rlimit): Use long instead of int as contained value.
    
    src/sendmail.c (send_flowed_text): Typecast format field precision
        argument.

    modified files:
     ChangeLog src/gline.c src/helpfile.c src/log.c src/main.c
     src/sendmail.c


2005-08-14 01:34:04 GMT	Michael Poole <mdpoole@troilus.org>	patch-26

    Summary:
      Improve channel merging and restrict channel age display.
    Revision:
      srvx--devo--1.3--patch-26

    src/chanserv.c (merge_data): Merge registered and owner-transfer
        timestamps, may_opchan flag, and max visitor count.
      (cmd_info): Only show channel age if the user is privileged.

    modified files:
     ChangeLog src/chanserv.c


2005-07-19 18:31:26 GMT	Michael Poole <mdpoole@troilus.org>	patch-25

    Summary:
      Properly check alerts based on numchannels criteria
    Revision:
      srvx--devo--1.3--patch-25

    src/opserv.c (opserv_add_user_alert): Channel alerts also include ones
      with non-zero min_channels.  Allow an alert to be both channel-based
      and nick-based.

    modified files:
     ChangeLog src/opserv.c


2005-07-19 18:18:48 GMT	Michael Poole <mdpoole@troilus.org>	patch-24

    Summary:
      Fix gcc-4.0 compile warnings and errors.
    Revision:
      srvx--devo--1.3--patch-24

    configure.in: Make sure socklen_t is defined.
    
    src/chanserv.c (bad_channel_ban): Make victimCount unsigned.
    
    src/ioset.c (ioset_run): Fifth argument to getsockopt() should be
      socklen_t.
    
    src/ioset.h (clock_skew): Undeclare; it is defined as static.
    
    src/nickserv.c (is_secure_password): Create appropriately typed local
      variable for third argument of dict_find().
    
    src/opserv.c (opserv_bad_channel): Likewise.
    
    src/proto-p10.c (call_oper_funcs): Declare at file scope rather than
      locally to mod_usermode() function.
    
    src/proto.h (dead_users): Undeclare; it is defined as static.
    
    src/saxdb.c (saxdb_write_int): Fix type of string buffer.

    modified files:
     ChangeLog configure.in languages/validate.pl src/chanserv.c
     src/ioset.c src/ioset.h src/nickserv.c src/opserv.c
     src/proto-p10.c src/proto.h src/saxdb.c
     {arch}/srvx/srvx--devo/srvx--devo--1.3/srvx@srvx.net--2004-srvx/patch-log/patch-71
     {arch}/srvx/srvx--devo/srvx--devo--1.3/srvx@srvx.net--2004-srvx/patch-log/patch-76
     {arch}/srvx/srvx--devo/srvx--devo--1.3/srvx@srvx.net--2004-srvx/patch-log/patch-77
     {arch}/srvx/srvx--devo/srvx--devo--1.3/srvx@srvx.net--2004-srvx/patch-log/patch-81
     {arch}/srvx/srvx--devo/srvx--devo--1.3/srvx@srvx.net--2004-srvx/patch-log/patch-84
     {arch}/srvx/srvx--devo/srvx--devo--1.3/srvx@srvx.net--2005-srvx/patch-log/patch-22
     {arch}/srvx/srvx--devo/srvx--devo--1.3/srvx@srvx.net--2005-srvx/patch-log/patch-23


2005-07-04 00:37:07 GMT	Zoot <zoot@gamesurge.net>	patch-23

    Summary:
      Fix match_ircglob() and globtest
    Revision:
      srvx--devo--1.3--patch-23

     * Fix a reversed test in match_ircglob() and make globtest compiles again.

    modified files:
     ChangeLog src/globtest.c src/tools.c


2005-06-01 19:05:39 GMT	Zoot <zoot@gamesurge.net>	patch-22

    Summary:
      Integrate Global "from" option; reorganize code
    Revision:
      srvx--devo--1.3--patch-22

     * src/global.c: Integrate SF.net patch #1211520 (from bruder2k) with a small
       bug fix; this patch adds a "from" option to Global notices and messages.
    
     * src/global.c, src/global.h: Make struct globalMessage private; cache text
       form of message's post date/time to avoid repeated strftime() calls.

    modified files:
     ChangeLog src/global.c src/global.h src/global.help


2005-05-30 15:14:56 GMT	Michael Poole <mdpoole@troilus.org>	patch-21

    Summary:
      Make match_ircglob() work more like the ircd.
    Revision:
      srvx--devo--1.3--patch-21

    src/tools.c (match_ircglob): Limit glob backtracking in the same way
    that ircds generally do.

    modified files:
     ChangeLog src/tools.c


2005-05-01 17:16:58 GMT	Michael Poole <mdpoole@troilus.org>	patch-20

    Summary:
      Fix en_GB language name, fix NickServ mergedb command.
    Revision:
      srvx--devo--1.3--patch-20

    FAQ: Clarify FAQ #8.
    
    src/nickserv.c: Avoid losing channel information when replacing an
    account using the mergedb command.
    
    languages/en_UK: Rename to en_GB.

    modified files:
     ChangeLog FAQ src/nickserv.c

    renamed files:
     languages/en_UK/.arch-ids/=id
       ==> languages/en_GB/.arch-ids/=id
     languages/en_UK/.arch-ids/README.id
       ==> languages/en_GB/.arch-ids/README.id
     languages/en_UK/.arch-ids/chanserv.help.id
       ==> languages/en_GB/.arch-ids/chanserv.help.id
     languages/en_UK/.arch-ids/opserv.help.id
       ==> languages/en_GB/.arch-ids/opserv.help.id
     languages/en_UK/.arch-ids/strings.db.id
       ==> languages/en_GB/.arch-ids/strings.db.id

    new directories:
     languages/en_GB/.arch-ids

    removed directories:
     languages/en_UK/.arch-ids

    renamed directories:
     languages/en_UK
       ==> languages/en_GB


2005-03-15 23:12:58 GMT	Michael Poole <mdpoole@troilus.org>	patch-19

    Summary:
      Clarify NickServ REGISTER help messages; fix ?raw and ?dump errors.
    Revision:
      srvx--devo--1.3--patch-19

    src/nickserv.help (REGISTER): Rephrase the message about using the
    same password to hopefully make it clearer.
    
    src/opserv.c (cmd_dump, cmd_raw): Use local buffers to hold the
    original message, so that parse_line() will not unsplit the line into
    the "original" buffer and strip out the sentinel :.

    modified files:
     ChangeLog src/nickserv.help src/opserv.c


2005-02-17 21:42:43 GMT	Michael Poole <mdpoole@troilus.org>	patch-18

    Summary:
      Fix registered channel desync; fix HelpServ crash for old cfg files
    Revision:
      srvx--devo--1.3--patch-18

    src/hash.c (AddChannelUser): Do not give ops to the first user to join
    a persistent channel.
    
    src/helpserv.c (helpserv_conf_read): Use a default description for bots.

    modified files:
     ChangeLog src/hash.c src/mod-helpserv.c


2005-02-11 03:10:49 GMT	Michael Poole <mdpoole@troilus.org>	patch-17

    Summary:
      Mention 'slab' in --with-malloc docs.  Merge fakehosts when merging accounts.
    Revision:
      srvx--devo--1.3--patch-17

    configure.in (--with-malloc): Mention the awesome 'slab' allocator option.
    
    src/nickserv.c (cmd_merge): Copy fakehost to target account if appropriate.

    modified files:
     ChangeLog configure.in src/nickserv.c


2005-02-08 04:42:43 GMT	Michael Poole <mdpoole@troilus.org>	patch-16

    Summary:
      Fix memory corruption when removing certain bans from a channel.
    Revision:
      srvx--devo--1.3--patch-16

    src/proto-common.c (mod_chanmode_apply): Make sure we get a pointer to
    the ban we want to deallocate BEFORE we remove it from the banlist.

    modified files:
     ChangeLog src/proto-common.c


2005-02-05 13:03:21 GMT	Michael Poole <mdpoole@troilus.org>	patch-15

    Summary:
      Rearrange slab allocation header; minor slab fixes.
    Revision:
      srvx--devo--1.3--patch-15

    src/alloc-slab.c (ALLOC_MAGIC, FREE_MAGIC): Replace with single-byte values.
    (struct alloc_header): Move file_id and line into second 32-bit word
    of header.
    (slab_alloc): Remove commented-out debug statements.
    (slab_unalloc): Remove memset() of freed block and commented-out debug
    statements.
    (slab_free): memset() freed blocks here instead.  Try to fix
    *_alloc_size counting errors (use the originally requested length
    rather than rounded-up length)

    modified files:
     ChangeLog src/alloc-slab.c


2005-02-05 03:52:51 GMT	Michael Poole <mdpoole@troilus.org>	patch-14

    Summary:
      Even more slab allocator updates.
    Revision:
      srvx--devo--1.3--patch-14

    src/slab-alloc.c (SLAB_DEBUG): Default to on.
    (SMALL_CUTOFF): Fix default value (must be a multiple of 4).
    (slab_unalloc): Fix slab counting.  When SLAB_RESERVE, allocate the
    set of pages in a burst, rather than supplementing them as we unmap.
    (slab_realloc): Fix a rather embarassing (and LARGE) memory leak.

    modified files:
     ChangeLog src/alloc-slab.c


2005-02-04 16:36:40 GMT	Michael Poole <mdpoole@troilus.org>	patch-13

    Summary:
      more debugging updates
    Revision:
      srvx--devo--1.3--patch-13

    src/alloc-slab.c: Switch free slab list from a stack to queue, and
    make sure there are SLAB_RESERVE in the queue before an old slab is
    dereferenced.  This causes a fault when dereferencing stale pointers
    to the last SLAB_RESERVE full slabs.
    
    src/log.c: Make struct logEntry *last static, to make sure gcc does
    not optimize it away.

    modified files:
     ChangeLog src/alloc-slab.c src/log.c


2005-01-31 22:28:59 GMT	Michael Poole <mdpoole@troilus.org>	patch-12

    Summary:
      More slab allocator updates.
    Revision:
      srvx--devo--1.3--patch-12

    src/alloc-slab.c: Disable extra debugging by default.  Add more
    statistics counters.  Change element type of little_slabs[].  Keep a
    global list of unused (full) slab pages, rather than per-slab.
    Various other cleanups and fixes.
    
    src/chanserv.h: Can only be off-channel with off_channel > 1.
    
    src/main.c: Update years in copyright notice.
    
    src/opserv.c: Remove OSMSG_STATS_MEMORY.  Make cmd_stats_memory()
    allocator-specific.

    modified files:
     ChangeLog src/alloc-slab.c src/chanserv.h src/main.c
     src/opserv.c


2005-01-31 11:08:15 GMT	Michael Poole <mdpoole@troilus.org>	patch-11

    Summary:
      Add "?stats memory" and optional alloc_header to slab.
    Revision:
      srvx--devo--1.3--patch-11

    src/alloc-slab.c: Add alloc_header (but no redzone) debug support,
    enabled by default.  Update alloc_count and alloc_size.
    
    src/opserv.c: Provide "stats memory" command for slab allocator.

    modified files:
     ChangeLog src/alloc-slab.c src/opserv.c


2005-01-31 05:14:52 GMT	Michael Poole <mdpoole@troilus.org>	patch-10

    Summary:
      Add slab allocator; reduce delta with srvx-gs.
    Revision:
      srvx--devo--1.3--patch-10

    configure.in: Check for getpagesize().  Support --with-malloc=slab.
    
    src/Makefile.am: Add alloc-slab.c as an extra source file.
    
    src/alloc-srvx.c: Clean up srvx_free() slightly.  Check for previously
    allocated blocks.
    
    srvx.conf.example, src/chanserv.c, src/main.c, src/modcmd.c,
    src/proto-p10.c: Apply patches to bring closer to srvx-gs branch.
    
    src/log.c: Assert and _exit() on fatal log messages.
    
    src/opserv.c: Clarify logic for modes to set on join floods.
    
    src/proto-common.c: Accept off-channel commands in registered channels.

    new files:
     src/.arch-ids/alloc-slab.c.id src/alloc-slab.c

    modified files:
     ChangeLog configure.in src/Makefile.am src/alloc-srvx.c
     src/chanserv.c src/chanserv.h src/common.h src/hash.h
     src/helpfile.c src/log.c src/main.c src/modcmd.c src/opserv.c
     src/proto-common.c src/proto-p10.c srvx.conf.example


2005-01-26 21:16:54 GMT	Michael Poole <mdpoole@troilus.org>	patch-9

    Summary:
      offchannel fixes; more memory verification
    Revision:
      srvx--devo--1.3--patch-9

    src/chanserv.c (cmd_register): Do not join channels if the default
    options include being offchannel.
    
    src/common.h: Verify list allocations when appending or removing.
    
    src/hash.c (GetUserMode): Verify channel and user list allocations.
    
    src/log.c (log_entry_search): Keep pointer to last visited log entry.
    
    src/proto-p10.c (mod_chanmode_parse): Fail if trying to change +z when
    passed MCP_REGISTERED.

    modified files:
     ChangeLog src/chanserv.c src/common.h src/hash.c src/log.c
     src/proto-p10.c


2005-01-24 17:12:38 GMT	Michael Poole <mdpoole@troilus.org>	patch-8

    Summary:
      typo fix in alloc-srvx.c; avoid dereferencing free()'d bans
    Revision:
      srvx--devo--1.3--patch-8

    src/alloc-srvx.c (srvx_realloc): Fix argument list to srvx_free().
    
    src/chanserv.c (find_matching_bans): Make temporary copies of bans to
    be removed.  Double-check remove count at end of loop.
    (unban_user, cmd_open): Free the string copies.
    (cmd_unbanall): Make temporary copies of removed bans and free them.
    (handle_mode): Likewise.
    
    src/opserv.c (cmd_clearbans): Likewise.

    modified files:
     ChangeLog src/alloc-srvx.c src/chanserv.c src/opserv.c


2005-01-24 16:45:44 GMT	Michael Poole <mdpoole@troilus.org>	patch-7

    Summary:
      More allocation debugging support.
    Revision:
      srvx--devo--1.3--patch-7

    src/alloc-srvx.c (srvx_realloc): Reorganize.
    (verify): New function.
    
    src/common.h (verify): Define and/or declare suitably.
    
    src/dict-splay.c (dict_splay): Verify node at each iteration.
    (dict_insert, dict_remove2, dict_find, dict_delete,
    dict_sanity_check): Verify entire dict.
    (dict_sanity_check_node): Verify node as valid allocation.
    
    src/hash.c (DelChannel): Verify channel before deletion.
    (GetUserMode): Verify channel, user, and each modeNode.
    
    src/mod-sockcheck.c (sockcheck_free_client): Verify client.
    (sockcheck_timeout_client, sockcheck_advance, sockcheck_readable,
    sockcheck_connected, sockcheck_begin_test): Likewise.
    (sockcheck_queue_address): Verify cached sockcheck entries.
    
    src/proto-p10.c (DelUser): Verify user before deletion.

    modified files:
     ChangeLog src/alloc-srvx.c src/common.h src/dict-splay.c
     src/hash.c src/mod-sockcheck.c src/proto-p10.c


2005-01-21 15:10:49 GMT	Michael Poole <mdpoole@troilus.org>	patch-6

    Summary:
      More debug allocator fixes and enhancements
    Revision:
      srvx--devo--1.3--patch-6

    src/alloc-srvx.c (*_MAGIC): ASk recognized the CCSDS ASM sequence.
    (srvx_free): Overwrite with 0xDE bytes to distinguish from
    uninitialized values.  As SailorFrag suggested, only overwrite the
    user region.
    
    src/dict-splay.c (dict_insert): Check whether free functions need to
    be worked around here as well.

    modified files:
     ChangeLog src/alloc-srvx.c src/dict-splay.c


2005-01-21 00:48:35 GMT	Michael Poole <mdpoole@troilus.org>	patch-5

    Summary:
      Add redzone and statistics reporting to debug allocator.
    Revision:
      srvx--devo--1.3--patch-5

    src/alloc-srvx.c (redzone): New variable to detect buffer overwrites.
    (alloc_count, alloc_size): New variables to track allocation stats.
    (srvx_malloc, srvx_realloc, srvx_free): Use the above.
    
    src/opserv.c (OSMSG_STATS_MEMORY): New translation string.
    (cmd_stats_memory): New (conditional) command function.
    (init_opserv): Conditionally provide cmd_stats_memory.

    modified files:
     ChangeLog src/alloc-srvx.c src/opserv.c


2005-01-20 23:41:17 GMT	Michael Poole <mdpoole@troilus.org>	patch-4

    Summary:
      Add built-in debug malloc wrapper.
    Revision:
      srvx--devo--1.3--patch-4

    TODO: Remove the completed TODO item.
    
    configure.in: Add --with-malloc=srvx support.
    
    src/Makefile.am: Add alloc-srvx.c to extra sources.
    
    src/common.h: Reindent debug malloc directives; add directives for
    WITH_MALLOC_SRVX.
    
    src/dict-splay.c: Kludge around free() as macro vs function.

    new files:
     src/.arch-ids/alloc-srvx.c.id src/alloc-srvx.c

    modified files:
     ChangeLog TODO configure.in src/Makefile.am src/common.h
     src/dict-splay.c


2005-01-20 22:51:54 GMT	Michael Poole <mdpoole@troilus.org>	patch-3

    Summary:
      various bugfixes and IPv6 preparation work
    Revision:
      srvx--devo--1.3--patch-3

    src/modcmd.c (modcmd_privmsg): Fix CTCP PING response type.
    
    src/opserv.help: Add column headers for command lists.
    
    src/tools.c (is_gline, split_ircmask): Accept colons in hostnames.

    modified files:
     ChangeLog src/modcmd.c src/opserv.help src/tools.c


2005-01-05 01:03:05 GMT	Michael Poole <mdpoole@troilus.org>	patch-2

    Summary:
      Add MODE_REGISTERED as +z for P10.
    Revision:
      srvx--devo--1.3--patch-2

    Add MODE_REGISTERED as +z for P10.

    modified files:
     ChangeLog src/proto-p10.c


2005-01-04 19:35:57 GMT	Michael Poole <mdpoole@troilus.org>	patch-1

    Summary:
      Rotate ChangeLog for new repository; clarify documentation files
    Revision:
      srvx--devo--1.3--patch-1

    Rotate ChangeLog to show changes for srvx@srvx.net--2005-srvx repo.
    
    Fix various file permissions to 664 instead of 620.
    
    Update FAQ and TODO.  Add UPGRADE file to arch and to distribution.

    new files:
     .arch-ids/ChangeLog.id .arch-ids/UPGRADE.id ChangeLog UPGRADE

    removed files:
     .arch-ids/ChangeLog.id ChangeLog

    modified files:
     FAQ INSTALL Makefile.am TODO languages/de/chanserv.help
     languages/de/global.help languages/de/modcmd.help
     languages/de/nickserv.help languages/de/strings.db
     languages/en_UK/chanserv.help languages/en_UK/strings.db
     src/chanserv.help


2005-01-04 19:16:14 GMT	Michael Poole <mdpoole@troilus.org>	base-0

    Summary:
      tag of srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-84
    Revision:
      srvx--devo--1.3--base-0

    (automatically generated log message)

    new patches:
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--base-0
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-1
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-2
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-3
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-4
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-5
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-6
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-7
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-8
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-9
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-10
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-11
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-12
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-13
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-14
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-15
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-16
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-17
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-18
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-19
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-20
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-21
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-22
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-23
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-24
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-25
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-26
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-27
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-28
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-29
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-30
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-31
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-32
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-33
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-34
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-35
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-36
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-37
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-38
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-39
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-40
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-41
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-42
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-43
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-44
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-45
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-46
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-47
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-48
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-49
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-50
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-51
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-52
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-53
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-54
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-55
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-56
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-57
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-58
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-59
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-60
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-61
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-62
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-63
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-64
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-65
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-66
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-67
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-68
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-69
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-70
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-71
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-72
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-73
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-74
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-75
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-76
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-77
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-78
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-79
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-80
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-81
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-82
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-83
     srvx@srvx.net--2004-srvx/srvx--devo--1.3--patch-84


